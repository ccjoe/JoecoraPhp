!function(a){a.fn.guide=function(b){b=b||{},opts=a.extend({},a.fn.guide.defaults,b);var c=a(this);init=function(){hxArrSet=_getHxLen(),parseInt(hxArrSet.join(""),10)>0&&(_showFrame(),addAnchor("linked"),hxSort(),styleGuide(),opts.isScorllShow&&scrollShow())},_getHxLen=function(){for(var a=[],b=1;6>=b;b++)a.push(c.find("h"+b).length);return a},_showFrame=function(){var b=a("<div class='"+opts.guideClass+"' />");a("body").prepend(b)},addAnchor=function(b){for(var d,e=0;5>=e;e++)if(hxArrSet[e]>0)for(var f=e+1,g=0;g<hxArrSet[e];g++)if("linked"===b)d=c.find("h"+f).eq(g).addClass("h"+f),d.attr({name:"to"+f+g,id:"to"+f+g});else if("link"===b){d=a("."+opts.guideClass).find(".h"+f).eq(g).attr({href:"#to"+f+g});var h=g+1,i=f-1;2===f?d.prepend("<span>"+h+"</span>"):f>2&&d.prepend("<span>"+i+"."+h+"</span>"),d.replaceWith('<a href="#to'+f+g+'" class="h'+f+'">'+d.text()+"</a>")}},hxSort=function(){var b=c.find("h1,h2,h3,h4,h5,h6").clone();a("."+opts.guideClass).append(b),addAnchor("link")},styleGuide=function(){var b=a("<style></style"),c=".guide-frame { position : fixed; border : 1px solid #ddd; height : 300px; top:50%; right : 10px; margin-top : -150px; background-color : #fff; padding : 10px; overflow : auto; z-index : 10000}.guide-frame a { display: block; font-size: 12px; color: #333; text-decoration: none; line-height : 24px; padding-left : 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; text-algin: left }.guide-frame .h1{ font-weight: bold; border-bottom : 1px solid #ddd }.guide-frame .h2{ color: #555; font-size: 13px; font-weight:bold; margin-bottom:1px;}.guide-frame .h3{ margin-left: 15px; color: #666; font-size: 13px;  margin-bottom:2px; }.guide-frame .h4{ margin-left: 30px; color: #777;  margin-bottom:4px;  }.guide-frame .h5{ margin-left: 45px; color: #999;  margin-bottom:6px;  }.guide-frame .h6{ margin-left: 60px; color: #aaa;   }";b.html(c),a("head").append(b)},scrollShow=function(){},init()},a.fn.guide.defaults={guideClass:"guide-frame",isScorllShow:!0}}(jQuery);
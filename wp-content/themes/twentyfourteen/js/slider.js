!function(a){a.featuredslider=function(b,c){var d,e,f=a(b),g=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,h="ontouchstart"in window||g||window.DocumentTouch&&document instanceof DocumentTouch,i="click touchend MSPointerUp",j="",k={};f.vars=a.extend({},a.featuredslider.defaults,c),e=f.vars.namespace,a.data(b,"featuredslider",f),k={init:function(){f.animating=!1,f.currentSlide=0,f.animatingTo=f.currentSlide,f.atEnd=0===f.currentSlide||f.currentSlide===f.last,f.containerSelector=f.vars.selector.substr(0,f.vars.selector.search(" ")),f.slides=a(f.vars.selector,f),f.container=a(f.containerSelector,f),f.count=f.slides.length,f.prop="marginLeft",f.isRtl=a("body").hasClass("rtl"),f.args={},f.transitions=function(){var a,b=document.createElement("div"),c=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(a in c)if(void 0!==b.style[c[a]])return f.pfx=c[a].replace("Perspective","").toLowerCase(),f.prop="-"+f.pfx+"-transform",!0;return!1}(),""!==f.vars.controlsContainer&&(f.controlsContainer=a(f.vars.controlsContainer).length>0&&a(f.vars.controlsContainer)),f.doMath(),f.setup("init"),k.controlNav.setup(),k.directionNav.setup(),1===a(f.containerSelector).length&&a(document).bind("keyup",function(a){var b=a.keyCode,c=!1;f.animating||39!==b&&37!==b||(39===b?c=f.getTarget("next"):37===b&&(c=f.getTarget("prev")),f.featureAnimate(c))}),h&&k.touch(),a(window).bind("resize orientationchange focus",k.resize),f.find("img").attr("draggable","false")},controlNav:{setup:function(){k.controlNav.setupPaging()},setupPaging:function(){var b,c,d,g="control-paging",h=1;if(f.controlNavScaffold=a('<ol class="'+e+"control-nav "+e+g+'"></ol>'),f.pagingCount>1)for(d=0;d<f.pagingCount;d++)c=f.slides.eq(d),b="<a>"+h+"</a>",f.controlNavScaffold.append("<li>"+b+"</li>"),h++;f.controlsContainer?a(f.controlsContainer).append(f.controlNavScaffold):f.append(f.controlNavScaffold),k.controlNav.set(),k.controlNav.active(),f.controlNavScaffold.delegate("a, img",i,function(b){if(b.preventDefault(),""===j||j===b.type){var c=a(this),d=f.controlNav.index(c);c.hasClass(e+"active")||(f.direction=d>f.currentSlide?"next":"prev",f.featureAnimate(d))}""===j&&(j=b.type),k.setToClearWatchedEvent()})},set:function(){var b="a";f.controlNav=a("."+e+"control-nav li "+b,f.controlsContainer?f.controlsContainer:f)},active:function(){f.controlNav.removeClass(e+"active").eq(f.animatingTo).addClass(e+"active")},update:function(b,c){f.pagingCount>1&&"add"===b?f.controlNavScaffold.append(a("<li><a>"+f.count+"</a></li>")):1===f.pagingCount?f.controlNavScaffold.find("li").remove():f.controlNav.eq(c).closest("li").remove(),k.controlNav.set(),f.pagingCount>1&&f.pagingCount!==f.controlNav.length?f.update(c,b):k.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+e+'direction-nav"><li><a class="'+e+'prev" href="#">'+f.vars.prevText+'</a></li><li><a class="'+e+'next" href="#">'+f.vars.nextText+"</a></li></ul>");f.controlsContainer?(a(f.controlsContainer).append(b),f.directionNav=a("."+e+"direction-nav li a",f.controlsContainer)):(f.append(b),f.directionNav=a("."+e+"direction-nav li a",f)),k.directionNav.update(),f.directionNav.bind(i,function(b){b.preventDefault();var c;(""===j||j===b.type)&&(c=f.getTarget(a(this).hasClass(e+"next")?"next":"prev"),f.featureAnimate(c)),""===j&&(j=b.type),k.setToClearWatchedEvent()})},update:function(){var a=e+"disabled";1===f.pagingCount?f.directionNav.addClass(a).attr("tabindex","-1"):f.directionNav.removeClass(a).removeAttr("tabindex")}},touch:function(){function a(a){f.animating?a.preventDefault():(window.navigator.msPointerEnabled||1===a.touches.length)&&(m=f.w,o=Number(new Date),q=a.touches[0].pageX,r=a.touches[0].pageY,l=(f.currentSlide+f.cloneOffset)*m,f.animatingTo===f.last&&"next"!==f.direction&&(l=0),j=q,k=r,b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",d,!1))}function c(a){q=a.touches[0].pageX,r=a.touches[0].pageY,n=j-q,p=Math.abs(n)<Math.abs(r-k),p||(a.preventDefault(),f.transitions&&f.setProps(l+n,"setTouch"))}function d(){if(b.removeEventListener("touchmove",c,!1),f.animatingTo===f.currentSlide&&!p&&null!==n){var a=n,e=f.getTarget(a>0?"next":"prev");f.featureAnimate(e)}b.removeEventListener("touchend",d,!1),j=null,k=null,n=null,l=null}function e(a){a.stopPropagation(),f.animating?a.preventDefault():(b._gesture.addPointer(a.pointerId),s=0,m=f.w,o=Number(new Date),l=(f.currentSlide+f.cloneOffset)*m,f.animatingTo===f.last&&"next"!==f.direction&&(l=0))}function h(a){a.stopPropagation();var c,d,e=a.target._slider;if(e)return c=-a.translationX,d=-a.translationY,s+=c,n=s,p=Math.abs(s)<Math.abs(-d),a.detail===a.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){b._gesture.stop()}):void((!p||Number(new Date)-o>500)&&(a.preventDefault(),e.transitions&&e.setProps(l+n,"setTouch")))}function i(a){a.stopPropagation();var b,c,d=a.target._slider;d&&(d.animatingTo!==d.currentSlide||p||null===n||(b=n,c=d.getTarget(b>0?"next":"prev"),d.featureAnimate(c)),j=null,k=null,n=null,l=null,s=0)}var j,k,l,m,n,o,p=!1,q=0,r=0,s=0;g?(b.style.msTouchAction="none",b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",e,!1),b._slider=f,b.addEventListener("MSGestureChange",h,!1),b.addEventListener("MSGestureEnd",i,!1)):b.addEventListener("touchstart",a,!1)},resize:function(){!f.animating&&f.is(":visible")&&(f.doMath(),k.smoothHeight(),f.newSlides.width(f.computedW),f.setProps(f.computedW,"setTotal"))},smoothHeight:function(a){var b=f.viewport;a?b.animate({height:f.slides.eq(f.animatingTo).height()},a):b.height(f.slides.eq(f.animatingTo).height())},setToClearWatchedEvent:function(){clearTimeout(d),d=setTimeout(function(){j=""},3e3)}},f.featureAnimate=function(a){if(a!==f.currentSlide&&(f.direction=a>f.currentSlide?"next":"prev"),!f.animating&&f.is(":visible")){f.animating=!0,f.animatingTo=a,k.controlNav.active(),f.slides.removeClass(e+"active-slide").eq(a).addClass(e+"active-slide"),f.atEnd=0===a||a===f.last,k.directionNav.update();var b,c=f.computedW;b=0===f.currentSlide&&a===f.count-1&&"next"!==f.direction?0:f.currentSlide===f.last&&0===a&&"prev"!==f.direction?(f.count+1)*c:(a+f.cloneOffset)*c,f.setProps(b,"",f.vars.animationSpeed),f.transitions?(f.atEnd||(f.animating=!1,f.currentSlide=f.animatingTo),f.container.unbind("webkitTransitionEnd transitionend"),f.container.bind("webkitTransitionEnd transitionend",function(){f.wrapup(c)})):f.container.animate(f.args,f.vars.animationSpeed,"swing",function(){f.wrapup(c)}),k.smoothHeight(f.vars.animationSpeed)}},f.wrapup=function(a){0===f.currentSlide&&f.animatingTo===f.last?f.setProps(a,"jumpEnd"):f.currentSlide===f.last&&0===f.animatingTo&&f.setProps(a,"jumpStart"),f.animating=!1,f.currentSlide=f.animatingTo},f.getTarget=function(a){return f.direction=a,f.isRtl&&(a="next"===a?"prev":"next"),"next"===a?f.currentSlide===f.last?0:f.currentSlide+1:0===f.currentSlide?f.last:f.currentSlide-1},f.setProps=function(a,b,c){var d=function(){var c=function(){switch(b){case"setTotal":return(f.currentSlide+f.cloneOffset)*a;case"setTouch":return a;case"jumpEnd":return f.count*a;case"jumpStart":return a;default:return a}}();return-1*c+"px"}();f.transitions&&(d="translate3d("+d+",0,0 )",c=void 0!==c?c/1e3+"s":"0s",f.container.css("-"+f.pfx+"-transition-duration",c)),f.args[f.prop]=d,(f.transitions||void 0===c)&&f.container.css(f.args)},f.setup=function(b){var c;"init"===b&&(f.viewport=a('<div class="'+e+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(f).append(f.container),f.cloneCount=0,f.cloneOffset=0),f.cloneCount=2,f.cloneOffset=1,"init"!==b&&f.container.find(".clone").remove(),f.container.append(f.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(f.slides.last().clone().addClass("clone").attr("aria-hidden","true")),f.newSlides=a(f.vars.selector,f),c=f.currentSlide+f.cloneOffset,f.container.width(200*(f.count+f.cloneCount)+"%"),f.setProps(c*f.computedW,"init"),setTimeout(function(){f.doMath(),f.newSlides.css({width:f.computedW,"float":"left",display:"block"}),k.smoothHeight()},"init"===b?100:0),f.slides.removeClass(e+"active-slide").eq(f.currentSlide).addClass(e+"active-slide")},f.doMath=function(){var a=f.slides.first();f.w=void 0===f.viewport?f.width():f.viewport.width(),f.h=a.height(),f.boxPadding=a.outerWidth()-a.width(),f.itemW=f.w,f.pagingCount=f.count,f.last=f.count-1,f.computedW=f.itemW-f.boxPadding},f.update=function(a,b){f.doMath(),a<f.currentSlide?f.currentSlide+=1:a<=f.currentSlide&&0!==a&&(f.currentSlide-=1),f.animatingTo=f.currentSlide,"add"===b||f.pagingCount>f.controlNav.length?k.controlNav.update("add"):("remove"===b||f.pagingCount<f.controlNav.length)&&(f.currentSlide>f.last&&(f.currentSlide-=1,f.animatingTo-=1),k.controlNav.update("remove",f.last)),k.directionNav.update()},k.init()},a.featuredslider.defaults={namespace:"slider-",selector:".slides > li",animationSpeed:600,controlsContainer:"",prevText:featuredSliderDefaults.prevText,nextText:featuredSliderDefaults.nextText},a.fn.featuredslider=function(b){return void 0===b&&(b={}),"object"==typeof b?this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length||0===e.length?e.fadeIn(400):void 0===c.data("featuredslider")&&new a.featuredslider(this,b)}):void 0}}(jQuery);